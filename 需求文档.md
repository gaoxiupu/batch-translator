# 产品需求文档 (PRD)：多模型批量 CSV 翻译助手

## 1. 项目概述 (Overview)
**产品名称**：Batch-LLM-Translator (暂定)
**产品形态**：本地运行的 Web 应用 (Local Web App)
**核心价值**：为用户提供一个无需代码基础、可配置 LLM 模型、批量自动化的 CSV 词条翻译工具，解决大量词条翻译效率低、格式难以统一的问题。

## 2. 用户流程 (User Flow)
1.  **启动应用**：用户在本地启动 Web 服务，浏览器自动打开操作界面。
2.  **文件导入**：用户拖拽或选择一个/多个 CSV 文件。
3.  **参数配置**：
    *   选择目标语言（如：英语、日语、西班牙语）。
    *   选择 LLM 模型（DeepSeek / Gemini / GLM）。
    *   输入对应的 API Key。
    *   指定/输入本地输出文件夹路径。
4.  **执行翻译**：点击“开始翻译”，查看进度条。
5.  **完成与查看**：系统提示完成，用户去指定文件夹查看生成的文件。

## 3. 功能需求 (Functional Requirements)

### 3.1 文件输入 (File Input)
*   **格式支持**：仅支持 `.csv` 文件。
*   **批量操作**：支持单文件上传，也支持多文件一次性上传。
*   **内容校验**：
    *   必须包含至少一列数据。
    *   默认读取第一列作为待翻译内容（如果有多列，需默认指定或让用户选择“源文列”）。

### 3.2 翻译配置 (Translation Configuration)
*   **模型选择器 (Model Selector)**：
    *   下拉菜单选项：`DeepSeek`, `Gemini`, `GLM (智谱)`.
*   **凭证输入 (Credential)**：
    *   输入框：API Key（掩码显示，支持明文切换）。
*   **目标语言 (Target Language)**：
    *   输入框或下拉选择（建议允许用户手动输入，以支持特殊语种，如 "Traditional Chinese (Taiwan)"）。
*   **输出路径 (Output Path)**：
    *   输入框：允许用户粘贴本地绝对路径（例如 `/Users/paul/downloads/output`）。
    *   默认值：默认为当前项目下的 `output` 文件夹。

### 3.3 核心翻译逻辑 (Core Translation Logic)
*   **提示词工程 (Prompt Engineering)**：
    *   系统需内置高效 Prompt，确保 LLM 只输出翻译结果，不输出解释性文字。
    *   **格式保留**：Prompt 中需强调“保留原文的特殊符号、大小写、HTML 标签（如有）”。
    *   **一一对应**：确保输出行数与输入行数严格一致。
*   **并发/速率限制**：由于是批量处理，后端需设置简单的队列或延时，避免瞬间触发 API Rate Limit (429 Error)。

### 3.4 文件输出 (File Output)
*   **文件命名**：`{原始文件名}_{目标语言后缀}.csv` (例如: `dict.csv` -> `dict_en.csv`)。
*   **内容结构**：
    *   **Column A (原名)**: 原始内容（保持不变）。
    *   **Column B (Translated)**: 新增一列，填入翻译后的内容。
*   **保存机制**：处理完一个文件即保存一个，无需等待所有文件全部完成。

## 4. 非功能需求 (Non-Functional Requirements)
*   **数据隐私**：API Key 仅在运行时存储于内存，不保存到数据库或配置文件（除非用户要求“记住我”）。
*   **容错性**：如果某一行翻译失败（网络波动），需在结果列标记 `[翻译失败]` 或留空，而不能导致整个程序崩溃。
*   **UI/UX**：界面需简洁，包含“处理日志/控制台”区域，显示当前正在翻译第几个文件、第几行。
